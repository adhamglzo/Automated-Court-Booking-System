<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        text-align: center;
        margin-top: 50px;
        background-color: #f4f4f9;
        color: #333;
      }
      .container {
        max-width: 500px;
        margin: auto;
        padding: 40px;
        background-color: #fff;
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
        border-top: 5px solid #ff9800; /* Amber for caution */
      }
      h1 {
        color: #ff9800;
        font-size: 2em;
        margin-bottom: 20px;
      }
      .details p {
        background-color: #ffe0b2; /* Light amber background */
        padding: 15px;
        border-radius: 8px;
        border-left: 5px solid #ff9800;
        text-align: left;
        margin-bottom: 25px;
        font-size: 1.1em;
      }
      .details strong {
        display: inline-block;
        width: 70px;
      }
      .button-cancel {
        background-color: #f44336; /* Red for cancellation */
        color: white;
        padding: 12px 25px;
        text-decoration: none;
        border-radius: 6px;
        font-size: 1.1em;
        font-weight: bold;
        transition: background-color 0.3s;
        border: none;
        cursor: pointer;
        margin: 5px;
      }
      .button-cancel:hover {
        background-color: #d32f2f;
      }
      .button-back {
        background-color: #9e9e9e; /* Grey for back */
        color: white;
        padding: 12px 25px;
        text-decoration: none;
        border-radius: 6px;
        font-size: 1.1em;
        font-weight: bold;
        transition: background-color 0.3s;
        border: none;
        cursor: pointer;
        margin: 5px;
      }
      .button-back:hover {
        background-color: #757575;
      }
    </style>
    <script>
      /**
       * Updates the page content to confirm the booking was kept.
       * This function avoids using Apps Script template syntax inside backticks (``) 
       * to ensure maximum reliability across browsers and deployments.
       */
      function keepBooking() {
        const container = document.querySelector('.container');
        
        // Update the content of the container to show the success message
        container.innerHTML = 
          '<h1 style="color: #4CAF50;">Booking Secured!</h1>' +
          '<p style="font-size: 1.2em; color: #333;">' +
            'Your court booking has **NOT** been canceled.' +
          '</p>' +
          '<p style="font-size: 0.9em; margin-top: 30px; color: #777;">' +
            'You can now safely close this window. Your booking is safe.' +
          '</p>';

        // Change the top border color to green for a positive visual cue
        container.style.borderTop = '5px solid #4CAF50'; 
      }
    </script>
  </head>
  <body>
    <div class="container">
      <h1>⚠️ Confirm Cancellation</h1>
      <p>Are you sure you want to cancel the following court booking?</p>
      
      <div class="details">
        <p>
          <strong>Court:</strong> <?= courtType ?><br>
          <strong>Date:</strong> <?= date ?><br>
          <strong>Time:</strong> <?= time ?>
        </p>
      </div>

      <!-- This link calls doGet with action=confirm to trigger the deletion -->
      <a href="<?= ScriptApp.getService().getUrl() ?>?bookingId=<?= bookingId ?>&action=confirm" class="button-cancel">
        Yes, Cancel This Booking
      </a>
      
      <!-- This button now calls the JavaScript function to show confirmation -->
      <button class="button-back" onclick="keepBooking()">No, Keep Booking</button>

    </div>
  </body>
</html>
